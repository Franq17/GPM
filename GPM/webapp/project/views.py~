# -*- coding: utf-8 -*-

from flask import Blueprint, render_template, current_app, redirect, url_for, send_from_directory
from flask.ext.login import login_required 

from .models import Project

project = Blueprint('project', __name__, url_prefix='/project')

@project.route('/')
@login_required
def index(name=None):
    return render_template('project/index.html', name=name)

@project.route('/<name>')
def pub(name):
    if project.name == name:
        return redirect(url_for('project.index'))

    project = Project.query.filter_by(nombre=name).first_or_404()
    return render_template('project/show.html', project=project)
